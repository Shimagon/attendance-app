# 🚀 クイックスタートガイド（MacBook & iPhone）

## 必要なもの
- ✅ MacBook（このMac）
- ✅ iPhone
- ✅ 同じWi-Fiネットワークに接続

---

## 📝 セットアップ手順（初回のみ）

### 1️⃣ アイコン画像を生成

ターミナルで以下を実行：
```bash
open generate-icons.html
```

ブラウザが開いたら：
1. アイコンが自動表示される
2. 「icon-192x192.png をダウンロード」ボタンをクリック
3. 「icon-512x512.png をダウンロード」ボタンをクリック

ダウンロードしたファイルを移動：
```bash
mv ~/Downloads/icon-*.png icons/
```

または、Finderで `icons/` フォルダにドラッグ&ドロップ

---

## 🎯 アプリの起動方法

### MacBookで起動

ターミナルで以下を実行：

```bash
./start-server.sh
```

以下のような表示が出ます：
```
=========================================
  勤怠管理PWAアプリ - サーバー起動
=========================================

✅ サーバーを起動しています...

📱 アクセス方法:
------------------------------------
  Macbook (ローカル):
    http://localhost:8000

  iPhone (同じWi-Fi内):
    http://192.168.1.157:8000
------------------------------------
```

**⚠️ IPアドレス（`192.168.1.157`の部分）はメモしてください！**

---

## 📱 iPhoneでアクセス

### ステップ1: Safariで開く

1. iPhoneのSafariを起動
2. アドレスバーに以下を入力：
   ```
   http://192.168.1.157:8000
   ```
   ※ IPアドレスは上で表示されたものを使用

### ステップ2: 動作確認

1. 名前を入力して「始める」をタップ
2. 出勤ボタンをタップしてみる
3. 勤務時間が表示されることを確認

### ステップ3: ホーム画面に追加（PWA化）

1. Safari下部の **共有ボタン** (□↑) をタップ
2. スクロールして **「ホーム画面に追加」** をタップ
3. 名前を確認して **「追加」** をタップ
4. ホーム画面にアイコンが追加される

これでアプリのように使えます！

---

## 💡 使い方

### 出勤打刻
1. アプリを開く
2. **出勤ボタン** をタップ
3. 「出勤を記録しました」と表示される
4. 勤務時間がリアルタイムで表示される

### 退勤打刻
1. **退勤ボタン** をタップ
2. 勤務時間が自動計算される
3. 「お疲れ様でした！勤務時間: X時間Y分」と表示

### 課題完了報告
1. **課題完了報告ボタン** をタップ
2. 確認ダイアログで「OK」
3. 完了報告が送信される

---

## 🔧 トラブルシューティング

### iPhoneでアクセスできない

**原因1: MacとiPhoneが別のWi-Fiに接続されている**
- 両方とも同じWi-Fiネットワークに接続してください

**原因2: MacのIPアドレスが変わった**
```bash
# IPアドレスを再確認
ipconfig getifaddr en0
```
新しいIPアドレスでアクセスしてください

**原因3: サーバーが起動していない**
- Macのターミナルでサーバーが動いているか確認
- 終了してしまった場合は `./start-server.sh` で再起動

### アイコンが表示されない

アイコンファイルが正しく配置されているか確認：
```bash
ls -la icons/
# icon-192x192.png と icon-512x512.png があればOK
```

### PWAとしてインストールできない

1. **必ずHTTP経由でアクセス**（`http://192.168.1.157:8000`）
2. Safariで開く（ChromeではなくSafari）
3. 一度ページをリロード（下にスワイプ）

---

## 🛑 サーバーの停止

ターミナルで `Ctrl + C` を押す

---

## 🌐 外部公開（オプション）

iPhone以外からもアクセスしたい場合、ngrokを使用：

```bash
# ngrokをインストール（初回のみ）
brew install ngrok

# サーバーを公開
ngrok http 8000
```

表示されたURLをコピーして、どこからでもアクセス可能になります。

---

## 📊 データの確認

### ブラウザで確認

1. Safariでアプリを開く
2. デベロッパーツールを有効化（Settings > Safari > Advanced > Web Inspector）
3. アプリで右クリック > 「検証」
4. Console タブで以下を実行：

```javascript
// 全データを確認
console.log('ユーザー設定:', localStorage.getItem('attendanceApp_userSettings'))
console.log('本日の打刻:', localStorage.getItem('attendanceApp_todayAttendance'))
console.log('履歴:', localStorage.getItem('attendanceApp_history'))
```

---

## 🔑 次のステップ: API連携

現在はローカル動作のみです。LINE通知とスプレッドシート連携を有効化するには：

1. LINE Messaging APIのセットアップ
2. Google Apps Scriptのセットアップ
3. `js/app.js` の `API_CONFIG` を編集

詳細は [README.md](README.md) を参照してください。

---

**作成日**: 2025-11-29
**対応環境**: macOS + iOS
